---
slug: spacy-stanza-russian-swedish
title: 'How to use spaCy language models in Russian or Swedish'
date: '2020-03-22'
lastmod: '2022-01-09'
summary: I demo how you can use spaCy in 70+ languages by leveraging Stanza, a NLP toolkit by StandfordNLP. I give spaCy NER examples in Russian and Swedish.
keywords:
  - stanza vs spacy
  - spacy ner
  - spacy swedish
  - spacy russian
  - spacy swedish model
  - spacy russian language
  - standfordnlp
  - stanza pipeline
  - textrank spacy
  - spacy noun_chunks
categories:
  - ML
image: /images/spacy-stanza-russian-swedish/gun__1416482723_arsh.jpg
series:
  - top posts
---

## spaCy NER in more than 12 Languages

Let's say you want to do Named Entity Recognition (NER) in Russian or Swedish. You first look at NLP APIs.

Unfortunately, **cloud providers only provide NLP models in a few languages**:

- AWS Comprehend covers 12 languages; neither Russian or Swedish are supported [(source)](https://docs.aws.amazon.com/comprehend/latest/dg/supported-languages.html#supported-languages-feature)
- Google Cloud Natural Language covers 11 languages; Russian is supported but not Swedish [(source)](https://cloud.google.com/natural-language/docs/languages#entity_analysis)

Fortunately, you can now expand beyond those 12 languages and **tap into language models in more than 70 languages**.

This week, StanfordNLP released v1.0.0 of `Stanza`, their NLP toolkit in 70+ languages. [Paper](https://paperswithcode.com/paper/stanza-a-python-natural-language-processing)

<blockquote className="twitter-tweet" data-lang="en">
    <p lang="en" dir="ltr">Now also available for your spaCy pipeline: <br></br><br></br>spacy-stanza (formerly spacy-stanfordnlp)
        integrates Stanza by <a href="https://twitter.com/stanfordnlp?ref_src=twsrc%5Etfw">@StanfordNLP</a> â€“ with
        support for more languages and NER ðŸš€<a href="https://t.co/vAvAIXojNm">https://t.co/vAvAIXojNm</a> <a
            href="https://t.co/h0bYGh4tN5">https://t.co/h0bYGh4tN5</a> <a
            href="https://t.co/1xFyd9il1d">pic.twitter.com/1xFyd9il1d</a></p>&mdash; spaCy (@spacy_io) <a
        href="https://twitter.com/spacy_io/status/1239982230203764738?ref_src=twsrc%5Etfw">March 17, 2020</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charSet="utf-8"></script>

It was previously known as `StandfordNLP` and apparently went through a little renaming.
Stanza has a meaning borrowed from poetry and starts with "stan" like Stanford I guess:

> In poetry, a stanza is a grouped set of lines within a poem, usually set off from other stanzas
> by a blank line or indentation. Stanzas can have regular rhyme and metrical schemes,
> though stanzas are not strictly required to have either.

What's even more awesome is that Explosion quickly followed with the release of their `spaCy` wrapper to `Stanza`.

```shell
pip install spacy-stanza
```

So in the rest of this article, I will show how to do NER in Russian and Swedish using Stanza and spaCy.

## Spacy vs Stanza

In a [Hacker News post](https://news.ycombinator.com/item?id=22683184) from March 25,
spaCy's author himself writes :

> Our models are quite a bit behind state-of-the-art atm because we're still optimized for CPU.

He then explains the design choices spaCy made in more details before concluding:

> The bottom-line anyone should care about is, "Am I likely to see **a difference in accuracy
> between Stanza and spaCy** on my problem". At the moment I think the answer is "yes".
> (Although spaCy's default models are still cheaper to run on large datasets).
>
> We're a bit behind the current research atm, and the improvements from that research are
> definitely real. We're looking forward to releasing new models, but in the meantime you can
> also use the Stanza models with very little change to your spaCy code, to see if they help on your problem.

## Spacy in Russian: How to Find Lemmas or Entities

Let's try to parse a Russian document. I head over to Wikipedia and look for the [Arshavin page](https://ru.wikipedia.org/wiki/%D0%90%D1%80%D1%88%D0%B0%D0%B2%D0%B8%D0%BD,_%D0%90%D0%BD%D0%B4%D1%80%D0%B5%D0%B9_%D0%A1%D0%B5%D1%80%D0%B3%D0%B5%D0%B5%D0%B2%D0%B8%D1%87).

Arshavin is a famous Russian player that I used to follow when he played for Arsenal.

![arshavin](/images/spacy-stanza-russian-swedish/gun__1416482723_arsh.jpg)

```shell
# Russian requires an additional dependency
pip install pymorphy2==0.8
```

```python
>>> import stanza
>>> from spacy_stanza import StanzaLanguage
>>> from spacy import displacy
>>> stanza.download('ru')
Downloading https://raw.githubusercontent.com/stanfordnlp/stanza-resources/master/resources_1.0.0.json: 116kB [00:00, 2.96MB/s]
2020-03-18 14:38:35 INFO: Downloading default packages for language: ru (Russian)...
Downloading https://nlp.stanford.edu/software/stanza/1.0.0/ru/default.zip: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 591M/591M [09:11<00:00, 1.07MB/s]
2020-03-18 14:47:55 INFO: Finished downloading models and saved to /Users/louis.guitton/stanza_resources.
>>> snlp = stanza.Pipeline(lang="ru")
>>> nlp = StanzaLanguage(snlp)
2020-03-18 15:05:49 INFO: Loading these models for language: ru (Russian):
=========================
| Processor | Package   |
-------------------------
| tokenize  | syntagrus |
| pos       | syntagrus |
| lemma     | syntagrus |
| depparse  | syntagrus |
| ner       | wikiner   |
=========================

2020-03-18 15:05:49 INFO: Use device: cpu
2020-03-18 15:05:49 INFO: Loading: tokenize
2020-03-18 15:05:49 INFO: Loading: pos
2020-03-18 15:05:50 INFO: Loading: lemma
2020-03-18 15:05:50 INFO: Loading: depparse
2020-03-18 15:05:51 INFO: Loading: ner
2020-03-18 15:05:52 INFO: Done loading processors!
>>> text = """ÐÐ½Ð´Ñ€ÐµÌÐ¹ Ð¡ÐµÑ€Ð³ÐµÌÐµÐ²Ð¸Ñ‡ ÐÑ€ÑˆÐ°ÌÐ²Ð¸Ð½ (Ñ€Ð¾Ð´. 29 Ð¼Ð°Ñ 1981[4], Ð›ÐµÐ½Ð¸Ð½Ð³Ñ€Ð°Ð´) â€” Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ð¹ Ñ„ÑƒÑ‚Ð±Ð¾Ð»Ð¸ÑÑ‚, Ð±Ñ‹Ð²ÑˆÐ¸Ð¹ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð½ ÑÐ±Ð¾Ñ€Ð½Ð¾Ð¹ Ð Ð¾ÑÑÐ¸Ð¸, Ð·Ð°ÑÐ»ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑ‚ÐµÑ€ ÑÐ¿Ð¾Ñ€Ñ‚Ð° Ð Ð¾ÑÑÐ¸Ð¸ (2008). Ð’Ñ‹ÑÑ‚ÑƒÐ¿Ð°Ð» Ð½Ð° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑÑ… Ð°Ñ‚Ð°ÐºÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑƒÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¸ÐºÐ°, Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ð½Ð°Ð¿Ð°Ð´Ð°ÑŽÑ‰ÐµÐ³Ð¾, Ð¿Ð»ÐµÐ¹Ð¼ÐµÐ¹ÐºÐµÑ€Ð°. ÐŸÑ€Ð¸ Ñ‚Ñ€ÐµÐ½ÐµÑ€Ðµ Ð“ÑƒÑÐµ Ð¥Ð¸Ð´Ð´Ð¸Ð½ÐºÐµ Ð±Ñ‹Ð» Ð¾Ð´Ð½Ð¸Ð¼ Ð¸Ð· Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð² ÑÐ±Ð¾Ñ€Ð½Ð¾Ð¹ Ð Ð¾ÑÑÐ¸Ð¸. Ð’ 2008 Ð³Ð¾Ð´Ñƒ Ð¿Ð¾ÑÐ»Ðµ Ñ‡ÐµÐ¼Ð¿Ð¸Ð¾Ð½Ð°Ñ‚Ð° Ð•Ð²Ñ€Ð¾Ð¿Ñ‹ 2008 Ð³Ð¾Ð´Ð° Ð¿Ð¾Ð¿Ð°Ð» Ð² ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸Ñ‡ÐµÑÐºÑƒÑŽ ÑÐ±Ð¾Ñ€Ð½ÑƒÑŽ Ð•Ð²Ñ€Ð¾Ð¿Ñ‹ Ð¿Ð¾ Ð²ÐµÑ€ÑÐ¸Ð¸ Ð£Ð•Ð¤Ð, Ð° 2 Ð´ÐµÐºÐ°Ð±Ñ€Ñ, Ð² Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð°Ð½Ð¸Ñ Ð½Ð° Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð»ÑƒÑ‡ÑˆÐµÐ³Ð¾ Ð¸Ð³Ñ€Ð¾ÐºÐ° 2008 Ð³Ð¾Ð´Ð° Ð¸ Ð²Ñ€ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð½Ð°Ð³Ñ€Ð°Ð´Ñ‹ Â«Ð—Ð¾Ð»Ð¾Ñ‚Ð¾Ð¹ Ð¼ÑÑ‡Â» Ð¿Ð¾ Ð²ÐµÑ€ÑÐ¸Ð¸ Ð¶ÑƒÑ€Ð½Ð°Ð»Ð° Â«France FootballÂ», Ð·Ð°Ð½ÑÐ» 6-Ðµ Ð¼ÐµÑÑ‚Ð¾, Ñ‡Ñ‚Ð¾ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»ÑƒÑ‡ÑˆÐ¸Ð¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð¼ Ð´Ð»Ñ Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¾Ð³Ð¾ Ñ„ÑƒÑ‚Ð±Ð¾Ð»Ð¸ÑÑ‚Ð° Ð¿Ð¾ÑÐ»Ðµ Ñ€Ð°ÑÐ¿Ð°Ð´Ð° Ð¡Ð¡Ð¡Ð . ÐÐµÐ¾Ð´Ð½Ð¾ÐºÑ€Ð°Ñ‚Ð½Ð¾ Ð¿Ñ€Ð¸Ð·Ð½Ð°Ð²Ð°Ð»ÑÑ Ð»ÑƒÑ‡ÑˆÐ¸Ð¼ Ñ„ÑƒÑ‚Ð±Ð¾Ð»Ð¸ÑÑ‚Ð¾Ð¼ Ð Ð¾ÑÑÐ¸Ð¸ Ð² Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ð¾Ð¿Ñ€Ð¾ÑÐ°Ñ…. Ð¡ 5 Ð´ÐµÐºÐ°Ð±Ñ€Ñ 2009 Ð³Ð¾Ð´Ð° Ð²Ñ…Ð¾Ð´Ð¸Ñ‚ Ð² Â«ÐšÐ»ÑƒÐ± 100 Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ñ… Ð±Ð¾Ð¼Ð±Ð°Ñ€Ð´Ð¸Ñ€Ð¾Ð²Â»."""
>>> doc = nlp(text)
>>> displacy.render(doc, style="ent")
```

![arshavin](/images/spacy-stanza-russian-swedish/arshavin.png 'Russian document parsed with NER entities')

## Spacy in Swedish: How to Find Keywords

Now, let's try to parse a Swedish document. Once again, I head over to Wikipedia and look for the [Ibrahimovic page](https://sv.wikipedia.org/wiki/Zlatan_Ibrahimovi%C4%87).

Ibrahimovic was playing for Paris while I lived there.

![ibra](/images/spacy-stanza-russian-swedish/PSG-s-Zlatan-Ibrahimovic-during-the-First-League-Champion-PSG-Na.jpg)

```python
>>> stanza.download('sv')
Downloading https://raw.githubusercontent.com/stanfordnlp/stanza-resources/master/resources_1.0.0.json: 116kB [00:00, 3.38MB/s]
2020-03-19 07:16:01 INFO: Downloading default packages for language: sv (Swedish)...
Downloading https://nlp.stanford.edu/software/stanza/1.0.0/sv/default.zip: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 225M/225M [03:36<00:00, 1.04MB/s]
2020-03-19 07:19:43 INFO: Finished downloading models and saved to /Users/louis.guitton/stanza_resources.
>>> snlp = stanza.Pipeline(lang="sv")
>>> nlp = StanzaLanguage(snlp)
2020-03-19 07:49:43 INFO: Loading these models for language: sv (Swedish):
=========================
| Processor | Package   |
-------------------------
| tokenize  | talbanken |
| pos       | talbanken |
| lemma     | talbanken |
| depparse  | talbanken |
=========================

2020-03-19 07:49:43 INFO: Use device: cpu
2020-03-19 07:49:43 INFO: Loading: tokenize
2020-03-19 07:49:43 INFO: Loading: pos
2020-03-19 07:49:44 INFO: Loading: lemma
2020-03-19 07:49:44 INFO: Loading: depparse
2020-03-19 07:49:45 INFO: Done loading processors!
>>> text = """Zlatan IbrahimoviÄ‡, fÃ¶dd 3 oktober 1981 i VÃ¤stra SkrÃ¤vlinge fÃ¶rsamling i MalmÃ¶, Ã¤r en svensk fotbollsspelare. IbrahimoviÄ‡ har tilldelats Guldbollen elva gÃ¥nger och anses allmÃ¤nt vara Sveriges bÃ¤ste fotbollsspelare genom tiderna. FrÃ¥n 2001 till 2016 spelade han i svenska landslaget, dÃ¤r han med sina 62 mÃ¥l Ã¤r den frÃ¤mste mÃ¥lgÃ¶raren genom tiderna. Under sina 18 Ã¥r som utlandsproffs har svensken vunnit ligan vid elva tillfÃ¤llen med fem olika klubbar i fyra lÃ¤nder och blivit skyttekung i italienska Serie A tvÃ¥ gÃ¥nger och i franska Ligue 1 vid tre tillfÃ¤llen. IbrahimoviÄ‡ Ã¤r den ende som spelat fÃ¶r sju olika klubbar i Champions League, dÃ¤r han med sina 48 mÃ¥l ocksÃ¥ intar en delad niondeplats i skytteligans maratontabell. Hans frÃ¤msta internationella merit Ã¤r segern i Europa League med Manchester United 2016/2017. Svenskens Ã¶vergÃ¥ng frÃ¥n Inter till Barcelona 2009 var den spanska storklubbens dittills dyraste spelarkÃ¶p (69 miljoner euro). 2015 var IbrahimoviÄ‡ enligt tidskriften Forbes den 55:e bÃ¤st betalda kÃ¤ndisen i vÃ¤rlden, med en Ã¥rsinkomst pÃ¥ 39 miljoner dollar. I september 2018 gjorde IbrahimoviÄ‡ sitt 500:e mÃ¥l och blev dÃ¤rmed en av 28 spelare i fotbollshistorien som gjort minst 500 mÃ¥l (landslag och klubblag)."""
```

Contrary to Russian, the Swedish `stanza` model doesn't have a NER model (yet). You can double check available
NER models [here](https://stanfordnlp.github.io/stanza/models.html).

But the really cool thing for Swedish is that noun chunks rules are available in spacy (not the case for Russian)

> Tip: To check if noun chunks are available for one language in spacy, look for a `syntax_iterators.py` file
> in the language folder (eg `spacy.lang.sv`)

Why does it matter whether a document has noun chunks or not ? Well, if `doc.noun_chunks` are available,
you can then use the awesome [pytextrank](https://github.com/DerwenAI/pytextrank) library to extract
the top keywords.

```shell
pip install pytextrank
```

```python
>>> tr = pytextrank.TextRank()
>>> nlp.add_pipe(tr.PipelineComponent, name="textrank", last=True)  # add PyTextRank to the spaCy pipeline
>>> doc = nlp(text)
```

After writing a couple of convenience functions, here are the top 5 TextRank keywords highlighted in HTML:

![zlatan](/images/spacy-stanza-russian-swedish/zlatan.png 'Swedish document parsed with top 5 keywords')

## Resources

1. [Stanza: A Python Natural Language Processing Toolkit for Many Human Languages | Papers With Code](https://paperswithcode.com/paper/stanza-a-python-natural-language-processing)
1. [You can also try out Stanza in spaCy --- Ines updated the spacy-stanfordnlp wrap... | Hacker News](https://news.ycombinator.com/item?id=22683184)
1. [Models - Stanza](https://stanfordnlp.github.io/stanza/models.html)
1. [DerwenAI/pytextrank: Python implementation of TextRank for phrase extraction and summarization of text documents](https://github.com/DerwenAI/pytextrank)
1. [Languages Supported in Amazon Comprehend - Amazon Comprehend](https://docs.aws.amazon.com/comprehend/latest/dg/supported-languages.html#supported-languages-feature)
1. [Language Support | Cloud Natural Language API | Google Cloud](https://cloud.google.com/natural-language/docs/languages#entity_analysis)
